import cv2
import os

# Folder containing your images
image_folder = r'C:\\Users\\Eric\\OneDrive\\Desktop\\output2'  
# Output video file name
video_name = 'C:\\Users\\Eric\\OneDrive\\Desktop\\training_evolution_800.avi'

# Optional: frames per second
fps = 30  

# 1. Gather all image file names
images = [img for img in os.listdir(image_folder) if img.endswith(".png")]
# Sort them so they're in ascending order: train-0.png, train-1.png, ...
# Adjust this sorting logic if your filenames differ
images.sort(key=lambda x: int(x.split('-')[1].split('.')[0]))

# 2. Read the first image to get dimensions
first_image_path = os.path.join(image_folder, images[0])
frame = cv2.imread(first_image_path)
height, width, layers = frame.shape

# 3. Create a VideoWriter
fourcc = cv2.VideoWriter_fourcc(*'XVID')  # or 'mp4v' for .mp4
video = cv2.VideoWriter(video_name, fourcc, fps, (width, height))

# 4. Write each image to the video
for image in images:
    image_path = os.path.join(image_folder, image)
    frame = cv2.imread(image_path)
    video.write(frame)

# 5. Release everything
video.release()
cv2.destroyAllWindows()

print(f"Video saved as {video_name}")
